---
// Sidebar component with table of contents, product card, author card, and related topics
import { Image } from 'astro:assets';
import towelImage from '../assets/towel-small.jpg';

interface TocItem {
  href: string;
  text: string;
}

interface Props {
  tocItems?: TocItem[];
}

const { tocItems = [] } = Astro.props;
---

<aside class="hidden lg:block lg:col-span-4 relative">
  <div class="sticky top-24 space-y-8">

    <!-- Essential Tool Card -->
    <div class="bg-white dark:bg-surface-dark border border-gray-200 dark:border-gray-700 rounded-xl shadow-lg overflow-hidden relative group">
      <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-accent-dark to-primary"></div>
      <div class="p-6">
        <div class="flex items-center justify-between mb-4">
          <span class="text-xs font-bold text-accent-dark dark:text-primary uppercase tracking-wider bg-emerald-50 dark:bg-emerald-900/30 px-2 py-1 rounded">Essential Tool</span>
          <span class="material-symbols-outlined text-gray-400" style="font-size: 20px;">check_circle</span>
        </div>
        <div class="flex gap-4 mb-4">
          <Image src={towelImage} alt="Soft cotton household towel used for Japanese neck stretching exercises - the only equipment needed" class="size-24 rounded-lg object-cover bg-gray-100 shadow-md" width={96} height={96} />
          <div>
            <h4 class="text-lg font-bold text-text-main-light dark:text-text-main-dark leading-tight">Your Household Towel</h4>
            <p class="text-xs text-text-muted-light dark:text-text-muted-dark mt-1">
              No equipment needed
            </p>
          </div>
        </div>
        <p class="text-sm text-text-muted-light dark:text-text-muted-dark mb-5 leading-relaxed">
          You don't need expensive gym equipment. Learn how a simple towel can fix your posture.
        </p>
        <a href="/#technique-1" class="flex items-center justify-center gap-2 bg-accent-dark hover:bg-emerald-800 text-white font-bold py-3 px-4 rounded-lg text-sm w-full transition-all shadow-md hover:shadow-lg transform hover:-translate-y-0.5">
          See How It Works
          <span class="material-symbols-outlined text-sm">arrow_forward</span>
        </a>
      </div>
    </div>

    <!-- Table of Contents -->
    {tocItems.length > 0 && (
      <div class="bg-gray-50 dark:bg-surface-dark/50 rounded-xl p-6 border border-gray-100 dark:border-gray-800">
        <h3 class="font-bold text-lg mb-4 flex items-center gap-2 text-text-main-light dark:text-text-main-dark">
          <span class="material-symbols-outlined text-accent-dark dark:text-emerald-400">list</span>
          In this Article
        </h3>
        <nav>
          <ul class="space-y-3 relative border-l border-gray-200 dark:border-gray-700 ml-2 pl-4">
            {tocItems.map((item, index) => (
              <li>
                <a
                  class={`block text-sm transition-colors ${index === 0 ? 'font-medium text-accent-dark dark:text-emerald-400 hover:text-emerald-800' : 'text-text-muted-light dark:text-gray-400 hover:text-accent-dark dark:hover:text-emerald-400'}`}
                  href={item.href}
                >
                  {item.text}
                </a>
              </li>
            ))}
          </ul>
        </nav>
      </div>
    )}

    <!-- Author Card -->
    <div class="bg-white dark:bg-surface-dark rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700">
      <div class="flex items-center gap-4 mb-4">
        <img alt="Dr. Yuki Tanaka, Japanese physical therapist and wellness expert specializing in traditional stretching techniques" class="size-14 rounded-full border-2 border-emerald-100 dark:border-emerald-900" src="https://lh3.googleusercontent.com/aida-public/AB6AXuDjUcgeAK6K6KACQtlruj6_ORdvKKdr-yUYMQ4Md9OLoSabhEdtwQhOlD_x-KGSpFOo-BZrr-fQnuyn68T1CI88qrZS2KhuC4jHLI7apguZdMsVu1bjgRT3cT0r5AT5dkhCXxHbbVswmTXf57p6_JdOkgxzyW8tO4nUTG8MX3MP3NJSyXKr4_d6TfCcIRmO8f-Vwv60Mf99hzyavFxCczrIv0PoiBcfwIzHm_4XZOCHRHlx2gxua20OucXhGFECkwwfYj1SJX1EVSEs"/>
        <div>
          <h3 class="font-serif text-lg font-bold text-text-main-light dark:text-text-main-dark">Dr. Yuki Tanaka</h3>
          <p class="text-[10px] font-bold text-accent-dark dark:text-emerald-400 uppercase tracking-wide">Physical Therapist</p>
        </div>
      </div>
      <p class="text-sm text-text-muted-light dark:text-text-muted-dark leading-relaxed mb-4">
        Dr. Tanaka has spent 15 years studying traditional Japanese wellness practices and their applications in modern physical therapy.
      </p>
      <a href="/yuki-tanaka-bio" class="text-accent-dark dark:text-emerald-400 font-bold text-sm hover:underline flex items-center gap-1 group">
        Read full bio <span class="material-symbols-outlined text-sm transition-transform group-hover:translate-x-1">arrow_forward</span>
      </a>
    </div>

    <!-- Japanese Exercise Methods -->
    <div class="bg-white dark:bg-surface-dark rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700">
      <h3 class="font-bold text-lg mb-2 flex items-center gap-2 text-text-main-light dark:text-text-main-dark">
        <span class="material-symbols-outlined text-accent-dark dark:text-emerald-400">fitness_center</span>
        Japanese Exercise Methods
      </h3>
      <p class="text-xs text-text-muted-light dark:text-text-muted-dark mb-4">Explore traditional techniques for longevity and wellness</p>
      <nav>
        <ul class="space-y-2">
          <li>
            <a class="flex items-center gap-3 p-2.5 rounded-lg hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-colors group" href="/rajio-taiso-radio-calisthenics">
              <span class="flex items-center justify-center size-8 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 text-accent-dark dark:text-emerald-400 text-xs font-bold group-hover:bg-accent-dark group-hover:text-white transition-colors">1</span>
              <div class="flex-1">
                <span class="block text-sm font-medium text-text-main-light dark:text-text-main-dark group-hover:text-accent-dark dark:group-hover:text-emerald-400 transition-colors">Rajio Taiso</span>
                <span class="block text-xs text-text-muted-light dark:text-text-muted-dark">Radio Calisthenics</span>
              </div>
              <span class="material-symbols-outlined text-gray-300 group-hover:text-accent-dark dark:group-hover:text-emerald-400 transition-colors text-sm">arrow_forward</span>
            </a>
          </li>
          <li>
            <a class="flex items-center gap-3 p-2.5 rounded-lg hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-colors group" href="/shinrin-yoku-forest-bathing">
              <span class="flex items-center justify-center size-8 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 text-accent-dark dark:text-emerald-400 text-xs font-bold group-hover:bg-accent-dark group-hover:text-white transition-colors">2</span>
              <div class="flex-1">
                <span class="block text-sm font-medium text-text-main-light dark:text-text-main-dark group-hover:text-accent-dark dark:group-hover:text-emerald-400 transition-colors">Shinrin-Yoku</span>
                <span class="block text-xs text-text-muted-light dark:text-text-muted-dark">Forest Bathing Walks</span>
              </div>
              <span class="material-symbols-outlined text-gray-300 group-hover:text-accent-dark dark:group-hover:text-emerald-400 transition-colors text-sm">arrow_forward</span>
            </a>
          </li>
          <li>
            <a class="flex items-center gap-3 p-2.5 rounded-lg hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-colors group" href="/makko-ho-stretching">
              <span class="flex items-center justify-center size-8 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 text-accent-dark dark:text-emerald-400 text-xs font-bold group-hover:bg-accent-dark group-hover:text-white transition-colors">3</span>
              <div class="flex-1">
                <span class="block text-sm font-medium text-text-main-light dark:text-text-main-dark group-hover:text-accent-dark dark:group-hover:text-emerald-400 transition-colors">Makko-Ho</span>
                <span class="block text-xs text-text-muted-light dark:text-text-muted-dark">4-Pose Meridian Stretching</span>
              </div>
              <span class="material-symbols-outlined text-gray-300 group-hover:text-accent-dark dark:group-hover:text-emerald-400 transition-colors text-sm">arrow_forward</span>
            </a>
          </li>
          <li>
            <a class="flex items-center gap-3 p-2.5 rounded-lg hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-colors group" href="/seiza-sitting-benefits">
              <span class="flex items-center justify-center size-8 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 text-accent-dark dark:text-emerald-400 text-xs font-bold group-hover:bg-accent-dark group-hover:text-white transition-colors">4</span>
              <div class="flex-1">
                <span class="block text-sm font-medium text-text-main-light dark:text-text-main-dark group-hover:text-accent-dark dark:group-hover:text-emerald-400 transition-colors">Seiza Sitting</span>
                <span class="block text-xs text-text-muted-light dark:text-text-muted-dark">Traditional Floor Posture</span>
              </div>
              <span class="material-symbols-outlined text-gray-300 group-hover:text-accent-dark dark:group-hover:text-emerald-400 transition-colors text-sm">arrow_forward</span>
            </a>
          </li>
          <li>
            <a class="flex items-center gap-3 p-2.5 rounded-lg hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-colors group" href="/hara-breathing-exercises">
              <span class="flex items-center justify-center size-8 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 text-accent-dark dark:text-emerald-400 text-xs font-bold group-hover:bg-accent-dark group-hover:text-white transition-colors">5</span>
              <div class="flex-1">
                <span class="block text-sm font-medium text-text-main-light dark:text-text-main-dark group-hover:text-accent-dark dark:group-hover:text-emerald-400 transition-colors">Hara Breathing</span>
                <span class="block text-xs text-text-muted-light dark:text-text-muted-dark">Belly-Centered Breathwork</span>
              </div>
              <span class="material-symbols-outlined text-gray-300 group-hover:text-accent-dark dark:group-hover:text-emerald-400 transition-colors text-sm">arrow_forward</span>
            </a>
          </li>
          <li>
            <a class="flex items-center gap-3 p-2.5 rounded-lg hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-colors group" href="/towel-stretch-for-back">
              <span class="flex items-center justify-center size-8 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 text-accent-dark dark:text-emerald-400 text-xs font-bold group-hover:bg-accent-dark group-hover:text-white transition-colors">6</span>
              <div class="flex-1">
                <span class="block text-sm font-medium text-text-main-light dark:text-text-main-dark group-hover:text-accent-dark dark:group-hover:text-emerald-400 transition-colors">Towel Stretch for Back</span>
                <span class="block text-xs text-text-muted-light dark:text-text-muted-dark">Fukutsuji Method</span>
              </div>
              <span class="material-symbols-outlined text-gray-300 group-hover:text-accent-dark dark:group-hover:text-emerald-400 transition-colors text-sm">arrow_forward</span>
            </a>
          </li>
          <li>
            <a class="flex items-center gap-3 p-2.5 rounded-lg hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-colors group" href="/asa-no-taiso-morning-stretch">
              <span class="flex items-center justify-center size-8 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 text-accent-dark dark:text-emerald-400 text-xs font-bold group-hover:bg-accent-dark group-hover:text-white transition-colors">7</span>
              <div class="flex-1">
                <span class="block text-sm font-medium text-text-main-light dark:text-text-main-dark group-hover:text-accent-dark dark:group-hover:text-emerald-400 transition-colors">Morning Stretch Routine</span>
                <span class="block text-xs text-text-muted-light dark:text-text-muted-dark">Asa no Tais≈ç</span>
              </div>
              <span class="material-symbols-outlined text-gray-300 group-hover:text-accent-dark dark:group-hover:text-emerald-400 transition-colors text-sm">arrow_forward</span>
            </a>
          </li>
          <li>
            <div class="flex items-center gap-3 p-2.5 rounded-lg bg-gray-50 dark:bg-gray-800/50 opacity-60">
              <span class="flex items-center justify-center size-8 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-400 dark:text-gray-500 text-xs font-bold">8</span>
              <div class="flex-1">
                <span class="block text-sm font-medium text-gray-400 dark:text-gray-500">Do-In Self Massage</span>
                <span class="block text-xs text-gray-400 dark:text-gray-500">Acupressure Techniques</span>
              </div>
              <span class="text-xs font-medium text-gray-400 dark:text-gray-500 bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded">Coming Soon</span>
            </div>
          </li>
          <li>
            <div class="flex items-center gap-3 p-2.5 rounded-lg bg-gray-50 dark:bg-gray-800/50 opacity-60">
              <span class="flex items-center justify-center size-8 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-400 dark:text-gray-500 text-xs font-bold">9</span>
              <div class="flex-1">
                <span class="block text-sm font-medium text-gray-400 dark:text-gray-500">Sotai</span>
                <span class="block text-xs text-gray-400 dark:text-gray-500">Natural Movement Therapy</span>
              </div>
              <span class="text-xs font-medium text-gray-400 dark:text-gray-500 bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded">Coming Soon</span>
            </div>
          </li>
          <li>
            <div class="flex items-center gap-3 p-2.5 rounded-lg bg-gray-50 dark:bg-gray-800/50 opacity-60">
              <span class="flex items-center justify-center size-8 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-400 dark:text-gray-500 text-xs font-bold">10</span>
              <div class="flex-1">
                <span class="block text-sm font-medium text-gray-400 dark:text-gray-500">Kinhin</span>
                <span class="block text-xs text-gray-400 dark:text-gray-500">Walking Meditation</span>
              </div>
              <span class="text-xs font-medium text-gray-400 dark:text-gray-500 bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded">Coming Soon</span>
            </div>
          </li>
        </ul>
      </nav>
    </div>

  </div>
</aside>
